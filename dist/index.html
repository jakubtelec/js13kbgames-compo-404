<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><style type="text/css">body,html{width:100%;height:100%;margin:0;padding:0;font-family:sans-serif}body{background-color:#000}#container{background:#2a2a2a;width:100vw;height:100vh;display:flex;align-items:center;justify-content:center}</style></head><body><div id="container"><canvas id="canvas" style="padding: 0; margin: 0; display: block;"></canvas></div><script type="text/javascript">!function(e){var t={};function i(_){if(t[_])return t[_].exports;var r=t[_]={i:_,l:!1,exports:{}};return e[_].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,_){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:_})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var _=Object.create(null);if(i.r(_),Object.defineProperty(_,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(_,r,function(t){return e[t]}.bind(null,r));return _},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=4)}([function(e,t,i){"use strict";i.d(t,"b",(function(){return _})),i.d(t,"c",(function(){return r})),i.d(t,"e",(function(){return n})),i.d(t,"a",(function(){return s})),i.d(t,"d",(function(){return a})),i.d(t,"f",(function(){return h}));const _={DEADLY_FIELD:{type:"d",mv:!1,defFrame:9,animDefs:{always:[9,10,11,12,13]}},ROCK:{type:"r",mv:!1,defFrame:14,animDefs:{}},CODE:{type:"c",mv:!0,defFrame:0,animDefs:{}},BOX:{type:"b",mv:!0,defFrame:15,animDefs:{}},EXIT:{type:"e",mv:!1,defFrame:16,animDefs:{always:[16,17,18,19,18,17]}},INACTIVE_EXIT:{type:"i",mv:!1,defFrame:23,animDefs:{}},PLAYER:{type:"p",mv:!0,defFrame:0,animDefs:{always:[0,1,2,3,4,5,6,7,8]}}},r=Object.values(_).reduce((e,t)=>({...e,[t.type]:t}),{}),n={37:"L",38:"U",39:"R",40:"D"},s=(e,t)=>({R:(t,i)=>[t+1<e?t+1:e-1,i],L:(e,t)=>[e-1>=0?e-1:0,t],U:(e,t)=>[e,t-1>=0?t-1:0],D:(e,i)=>[e,i+1<t?i+1:t-1]}),a="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+-={}().,?!:",h=8},function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"a",(function(){return a}));var _=i(0);const{CODE:r}=_.b,n=(e,t)=>e.find(e=>e.x===t)||{}||{},s=(e,t)=>{let i={},_="";for(let s=0;s<t;s++){const[t,a]=[n(e,s),n(e,s+1)];t.type===r.type?_+=" "+t.val:t.type&&[i.type,a.type].includes(r.type)&&(_=`${_} this.objectsMap["${t.type}"]`),i=t}return _&&(_=_.trim()+";\n"),_},a=function({x:e,y:t,...i}){this.x=e||0,this.y=t||0,Object.assign(this,i),this.animations={},this.startAnim=function(e,t=50){if(!this.animDefs[e])return;const i=this.animDefs[e];let _=0;this.animations[e]||(this.animations[e]=setInterval(()=>{this.frame=i[_],_=_===i.length-1?0:_+1},t))},this.stopAnim=function(e){this.animations[e]&&(this.animations[e]=clearInterval(this.animations[e]))},this.resetState=function(){this.frame=this.defFrame,Object.keys(this.animations).forEach(e=>this.stopAnim(e))}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var _constants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_helpers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1);const{CODE:CODE,PLAYER:PLAYER,EXIT:EXIT,DEADLY_FIELD:DEADLY_FIELD}=_constants__WEBPACK_IMPORTED_MODULE_0__.b,GameLogic=function(scene){const{width:width,height:height,fieldSize:fieldSize,stateHandlers:stateHandlers}=scene;this.interactive=!0,this.finished=!1,this.gameOver=!1,this.pool=new Set,this.directionsMap=Object(_constants__WEBPACK_IMPORTED_MODULE_0__.a)(width,height),this.objectsMap={..._constants__WEBPACK_IMPORTED_MODULE_0__.c};const kListener=e=>{const{keyCode:t}=e;_constants__WEBPACK_IMPORTED_MODULE_0__.e[t]&&this.movePlayers(_constants__WEBPACK_IMPORTED_MODULE_0__.e[t]),27==t&&stateHandlers.gameOver()};window.addEventListener("keydown",kListener,!1),this.getItem=function(e,t){return[...this.pool].find(i=>i.x===e&&i.y===t)||{}},this.addItem=function(e,t,i,_){const r=new _helpers__WEBPACK_IMPORTED_MODULE_1__.a({x:e,y:t,lastX:e*fieldSize,lastY:t*fieldSize,...i,frame:i.defFrame,val:_});return r.startAnim("always",60),this.pool.add(r),r},this.moveObj=function(e,t){const{mv:i,x:_,y:r,type:n}=e,s=n===PLAYER.type;let a=!1;if(i){a=!0;const[i,n]=this.directionsMap[t](_,r);if(i===_&&n===r)return!1;const h=this.getItem(i,n);s&&h&&(h.type===DEADLY_FIELD.type&&(this.gameOver=!0),h.type===EXIT.type&&(h.handler?h.handler(scene):this.finished=!0)),h&&h.type&&(a=this.moveObj(h,t)),a&&(this.interactive=!1,e.x=i,e.y=n)}return e.type===PLAYER.type&&e.untouched&&(e.untouched=!1),a},this.movePlayers=e=>{if(this.interactive){const t=[...this.pool].filter(({type:e})=>e===PLAYER.type).map(e=>(e.untouched=!0,e));for(const i of t)i.untouched&&(this.moveObj(i,e),i.untouched=!1)}this.gameOver?stateHandlers.gameOver():this.finished&&stateHandlers.levelFinished(),this.execute()},this.execute=function(){let code="";for(let e=0;e<height;e++)code+=Object(_helpers__WEBPACK_IMPORTED_MODULE_1__.b)([...this.pool].filter(t=>t.y===e),width);if(code.length)try{eval(code),this.remap()}catch(e){}},this.remap=function(){[...this.pool].forEach(e=>{this.objectsMap[e.type]!==CODE&&e.type!==this.objectsMap[e.type].type&&(Object.assign(e,this.objectsMap[e.type]),e.resetState(),e.startAnim("always",60))})},this.dispose=()=>{[...this.pool].forEach(e=>e.resetState()),window.removeEventListener("keydown",kListener,!1)}};__webpack_exports__.a=GameLogic},function(e,t,i){},function(e,t,i){"use strict";i.r(t);var _=i(0);var r=function(){let e=Date.now();this.el={},this.ctx={},this.paintFrame=()=>{},this.paintSprite=({sheet:e,x:t,y:i,n:_,spriteXSize:r,spriteYSize:n,fieldXSize:s,fieldYSize:a})=>{a=a||s,n=n||r,this.ctx.imageSmoothingEnabled=!1,this.ctx.drawImage(e,_*r,0,r,n,t,i,s,a)},this.paintText=(e,t,i,r,n,s)=>{s=s||r/3;let a=e;for(let e of i)this.paintSprite({sheet:n,x:a,y:t,n:_.d.indexOf(e.toUpperCase()),spriteXSize:3,spriteYSize:5,fieldXSize:r,fieldYSize:5*r/3}),a+=r+s},this.loop=t=>{const i=Date.now();this.paintFrame(t);const _=(i-e)/(1e3/60);e=i,this.loopId=requestAnimationFrame(()=>this.loop(_))},this.init=(e,t=300,i=300)=>{this.el=document.getElementById(e),this.ctx=this.el.getContext("2d"),this.ctx.canvas.width=t,this.ctx.canvas.height=i},this.resize=(e,t)=>{this.ctx.canvas.width=e,this.ctx.canvas.height=t},this.setup=()=>{},this.finish=()=>{},this.start=function(){this.setup(),requestAnimationFrame(()=>this.loop(1))},this.stop=function(){this.loopId=cancelAnimationFrame(this.loopId),this.finish()}},n=i(2);const s=(e,t)=>(e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e),a=(e,t,i)=>e>=t-i||e<=t+i,h=(e,t,i,_)=>{const r=_*i;return e<t-r?e+r:e>t+r?e-r:t};let o=document.createElement("canvas"),c=o.getContext("2d");const d=e=>(o.width=e.width,o.height=e.height,c.drawImage(e,0,0),c.getImageData(0,0,e.width,e.height)),l=e=>{o.width=e.width,o.height=e.height,c.putImageData(e,0,0);var t=new Image;return t.src=o.toDataURL(),t},f=(e,{move:t,color:i,start:_,length:r,fuzz:n,remove:a,sin:h},o)=>{let c=-4*t;for(let t=_;t<(_+r>e.data.length?e.data.length:_+r);t+=4){let _=h?Math.floor(40*Math.sin(t/16/o)):0;if(n&&(c+=5-s(0,2)),e.data[t]||e.data[t+1]||e.data[t+2]){a&&(e.data[t]=e.data[t+1]=e.data[t+2]=0);const[r,n,s]=i;e.data[t+c+_]=r,e.data[t+1+c+_]=n,e.data[t+2+c+_]=s}}return e},u=(e,t,i,_)=>{_[t]=_[t].split("").map((t,_)=>_===e?i:t).join("")},p=(e,{currentLevel:t,getLastestLevel:i})=>{const _="____________",r=[_,"___cccccc___","___cccccc___",_],n=[..."selectlevel:"],s=[];for(let t=0;t<3*Math.ceil(e.length/4);t++)r.push(_);return e.forEach((e,i)=>{const _=3*Math.ceil((i+1)/4)+1,a=i%4*3+1;u(a,_,"c",r),i<1e3?(u(a,_+1,"e",r),s.push(e=>e.loadLevel(i))):u(a,_+1,"i",r),i===t&&u(a<4?a+1:a-1,_+1,"p",r),n.push(String(i+1))}),{map:r,code:n,handlers:s}},m=new Image;m.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdAAAAAQCAYAAACmwi4AAAAFaklEQVR4Xu1dYXpbMQhrDrZL9SC91A6WfS+tN0IBCfBL48X7s622jC1jBDTrLm/712agwcD1er1eLpdLY4kytGP7p7DHYTu2y2Rt4GZgMzCdATPwHQ9cWqoEyLFGBTv9lIUFOxxo7GE+w0PH9gjQnfvr2i/Q/dKQj4+Pu/fGkvH+/j4tcbF81tuH5cur4zN3YPG+Ol7etXeXbAxbHc++v1tc15O18EkyGAJn4a1DZO1XhMA6byYZsOZ28BmsFM/B1Sw8mwRkAqlcM4OTflDFDf9i8GcKxrH2EXxHUGb/fOx/toCy78vjY2W85D0KoN681fGMaDCdk2jOCniGh7vixMs8dAAe86JHEonPo/HSHpsERPMYIToL393/o/BZ59vzPxkYwVcGGPRnK2AjzEiw/kcBZIJzdP7VBbC7f82NV3xkeLa6YKzAVuxr/8/ar8SjuwoUHQ5VISvgPSHPOIaXRKA1Vh5nEoiKA27Mp4DKipKtQmUFWsHo5JmpIL37Qr6N7vmn8awAeedYHT/4Rx2Zw0esu+ri2Y7QDPvIFzPjpoBKMqx2GRKQs/GWkFvZt/coIweQF2ldFkoSZOWu8UiE0BlY/Nn8sy1UNiDr/WaDqffoWfsj+7YeDrtGZw9Z8dOCm3nwXQHMvClti3071h6RT3TWll2AKpeRgI4xZs4Z9tGaVuWm/V7HHitWyXe0Eh7xE43fBFQ+fhn0GWKtLNYK4DrARG0kTwC0uHkZdBc/OJktoHJdvffx90iAWXx0fi95kPaj+2MFpeOUr4ZdqYUb+SDjG88qwIy4MXOqFSqzNjOn8nbY5EOKqCegkf0sXu+rgpfFloevcPY3XloPIiuAjAB7YscKcAbvZbDy6yhD0muw1Z8WeSYJ8USNrWAtR/PEXzqUl5Bk799LBsLMLfinL141p9djvx9f2YfmwPu7t3YGv0IL17oT3YmIOlPo7iJhRVgmsdQJql4TtWA74zMq0DPtswUHEjBPVOX6I/5Yc5EoZ+xHGuC1gStCalagaCEvYDPZh+fIjEBFAjgekSUQaEwKSRWvkwh0gZ7ooCzeE1sUIDyxlNx4Z7eSCbRP5EPPPP777Xr99Xa5oN+9MyDcGB/4lVq4kVgxPvGqFSjyd6a6ZOZ4diIsEjgdq6zEfnwtEkjpO56AWjGIFVukIZ59dDfRePpDRFag7ogHI16sAHqP+5nwkUh5wYUVuUfhWaHtOOYrYVdq4T6rACLfR+KOKjzkj8+MRxWwJaBRLNVjHj7ijBVQxt+i/XuxKvIXdNdyPC2gqG2G2jhn4yPCUOCPMhg2u1ndfuf+Mo635/5jYIUWLrqvbkD6afwzCyDi/hjv7F+LmVcFyq9H7drV8Ay/3pxvAqonytKcFaA7hf762PP4GhJQax5T4UZV2ip4eQbvk64ok7aEnj2/5nDcd4TPBD65DuMP0o8sLPLHge9gj3ar9XiOFi/z8Bj8Si1cpiKIeHlWPCtA3rzV8bqKcwXjpH/GkrGP/Csan/n9z1v80cZ0sNG9bRQ0ZuO1GGftV/Hy07CZYD/7/D/Nf9Y+up89/p2BV2nhjgQt+gQ+8o+zBHh1AezuX9+NFcei+2PxSPysuCsTZbZVX9k/8j1rPMyiZVaAKh9r8Uzl41Ubj7RrVSwV+/os1TVm8N/JuLr2Kw75ipiVWrhnCRjbyTjLfleAVsfL2FeNVxmB9d45K5Bn4bPxBwpopvrKGt/zYwaqCcisRKBi32uXyiwS3fuMNcZj9mzBICH+QwXvJ72HayTwQ0ARL3p89s/CZe17FeTK+Mwd7B8mz8ctORO+ua/JnW+5RO+etc/68S2mZSbvuZuBzcBmYDOwGdgMfDLwB1xVGMWzKDHQAAAAAElFTkSuQmCC";const g=new Image;g.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAAAFCAYAAACq7WVIAAABOElEQVRIS52WUQ7DIAxD4f6HZmJSJu/JDrT7aWEEEtsxnWOMsdZac865n3u832t+P+una3S+YipexxXD/bszeY7mk/K8yd/V4fJiPa5urUsxTHhWvQ5XYunw09zdes7xPGLInNOeaZ9fPo5IJ6SOuA7ABPQb0T4lu0AjqW/2cQJwQte62IgnDIsUxZ/vxJMxSWjkVOMUJxUSa3Fi+rpOB4TrqNShnct0LuIS60DsHIKO5849CeiJu9AtSIzDNzn6yaU756EIEqbdupML6Z5/DqSBT6+IJAyCdENkZ/8UTY1TTEekE5lev+4KuXFSh11y55p3AnSu41yUbkEe3f+3AnJice4UHUgLTB2jJHJ9IukkuJO7nSzcuemJRObaCcg1BsXHTuZV2jmQEwq/LTsnYuPc1P5mTZ3zAeDKODNaxjl/AAAAAElFTkSuQmCC";const{CODE:v,EXIT:A}=_.b,E=new(window.AudioContext||webkitAudioContext),L=44100;var y=function(e,t){this.getLastestLevel=()=>{const t=parseInt(localStorage.getItem("last_level")||0);return t>=e.length?e.length-1:t},this.currentLevel=this.getLastestLevel(),this.engine=new r,t.LEVELS_MAP=p(e,this),this.stateHandlers={gameOver:()=>this.loadLevel(t.GAME_OVER),levelFinished:()=>{this.curentLevel+1<e.length&&(this.currentLevel++,this.currentLevel>=this.getLastestLevel()&&localStorage.setItem("last_level",this.currentLevel)),this.loadLevel(t.WON)},levelMap:()=>this.loadLevel(t.LEVELS_MAP)},this.engine.paintFrame=e=>{this.delta=e;const{ctx:t,ctx:{canvas:{width:_,height:r}}}=this.engine;t.clearRect(0,0,_,r),t.beginPath(),t.fillStyle="black",t.rect(0,0,_,r),t.fill();for(const e of[...this.gameLogic.pool])this.paintItem(e);i&&((e,t,i)=>{t.putImageData(f(t.getImageData(0,0,e.width,e.height),i,e.width),0,0)})(this.engine.ctx.canvas,t,o)};let i=!1,o={};this.glitch=()=>{i=!0,o={move:s(20,60),color:[s(0,255),0,255],start:s(0,this.engine.ctx.canvas.height)*this.engine.ctx.canvas.width*4,length:s(0,this.engine.ctx.canvas.height)*this.engine.ctx.canvas.width*3,fuzz:!s(0,4),remove:!s(0,3),sin:!s(0,4)},setTimeout(()=>{i=!1,o={},setTimeout(this.glitch,s(200,1e3))},s(200,300))},this.recalcSize=()=>{this.fieldSize=Math.floor(.8*Math.min(window.innerWidth,window.innerHeight)/Math.max(this.width,this.height)),this.moveSpeed=this.fieldSize/_.f},this.loadLevel=i=>{t.LEVELS_MAP=p(e,this),"number"==typeof i&&(this.currentLevel=i,i=e[i]);const{map:r,code:s}=i,a=i.handlers||[];this.height=r.length,this.width=r[0].length,this.gameLogic&&this.gameLogic.dispose(),this.gameLogic=new n.a(this);let h=0,o=0;for(let e=0;e<this.height;e++)for(let t=0;t<this.width;t++){const i=r[e][t];if("_"!==i)if("c"===i)this.gameLogic.addItem(t,e,v,s[h]),h++;else{const r=_.c[i];i===A.type&&(r.handler=a[o],o++),this.gameLogic.addItem(t,e,r)}}this.recalcSize(),this.engine.init("canvas",this.width*this.fieldSize,this.height*this.fieldSize)},this.paintItem=e=>{const{x:t,y:i,lastX:_,lastY:r}=e,n=t*this.fieldSize,s=i*this.fieldSize,o=h(_,n,this.delta,this.moveSpeed),c=h(r,s,this.delta,this.moveSpeed);e.type===v.type?this.paintCode(o,c,e.val):this.engine.paintSprite({sheet:m,x:o,y:c,n:e.frame,spriteXSize:16,fieldXSize:this.fieldSize}),a(o,n,2*this.moveSpeed)&&a(c,s,2*this.moveSpeed)&&(this.gameLogic.interactive=!0),e.lastX=o,e.lastY=c},this.paintCode=(e,t,i)=>{const _=1===i.length?.5*this.fieldSize:this.fieldSize/i.length*.8,r=5*_/4,n=(this.fieldSize-_*i.length)/2,s=(this.fieldSize-r)/2;this.engine.paintText(e+n,t+s,i,_/1.33,this.greyFont)},this.run=()=>{((e=1,t=.05,i=220,_=0,r=0,n=.1,s=0,a=1,h=0,o=0,c=0,d=0,l=0,f=0,u=0,p=0,m=0,g=1,v=0,A=0)=>{let y,w,D=2*Math.PI,S=h*=500*D/L**2,O=(0<u?1:-1)*D/4,M=i*=(1+2*t*Math.random()-t)*D/L,P=[],I=0,x=0,b=0,j=1,z=0,C=0,T=0;for(o*=500*D/L**3,u*=D/L,c*=D/L,d*=L,l=L*l|0,w=(_=99+L*_)+(v*=L)+(r*=L)+(n*=L)+(m*=L)|0;b<w;P[b++]=T)++C%(100*p|0)||(T=s?1<s?2<s?3<s?Math.sin((I%D)**3):Math.max(Math.min(Math.tan(I),1),-1):1-(2*I/D%2+2)%2:1-4*Math.abs(Math.round(I/D)-I/D):Math.sin(I),T=(l?1-A+A*Math.sin(2*Math.PI*b/l):1)*(0<T?1:-1)*Math.abs(T)**a*e*.3*(b<_?b/_:b<_+v?1-(b-_)/v*(1-g):b<_+v+r?g:b<w-m?(w-b-m)/n*g:0),T=m?T/2+(m>b?0:(b<w-m?1:(w-b)/m)*P[b-m|0]/2):T),y=(i+=h+=o)*Math.sin(x*u-O),I+=y-y*f*(1-1e9*(Math.sin(b)+1)%2),x+=y-y*f*(1-1e9*(Math.sin(b)**2+1)%2),j&&++j>d&&(i+=c,M+=c,j=0),!l||++z%l||(i=M,h=S,j=j||1);(e=E.createBuffer(1,w,L)).getChannelData(0).set(P),(i=E.createBufferSource()).buffer=e,i.connect(E.destination),i.start()})(,,1501,.01,,.08,,.5,,,382,.07,,,,,,.65,.04,.49),this.loadLevel(t.LEVELS_MAP),((e,t)=>{let i=0;e.forEach(_=>_.onload=()=>{i++,i===e.length&&t()})})([m,g],()=>{var e,t;this.greyFont=(e=[255,255,255],t=[128,128,128],l(((e,t,i)=>{for(let _=0;_<e.data.length;_+=4)e.data[_]===t[0]&&e.data[_+1]===t[1]&&(e.data[_+2],t[2]),e.data[_]=i[0],e.data[_+1]=i[1],e.data[_+2]=i[2];return e})(d(g),e,t))),window.addEventListener("resize",()=>{this.recalcSize(),this.engine.resize(this.width*this.fieldSize,this.height*this.fieldSize)}),this.engine.start(),this.glitch()})}};var w=[{map:["rrr______","rpr_rrrr_","r___r____","rrr_rbrrr","____r____","_rrrd__e_","____drrrr"]},{map:["rrrrrrrr","r______r","r_p____r","r_____br","r___rc_r","rrrrrrrr","______d_","____e___","________"],code:["="]},{map:["__ddd___dd","_p________","____ddd___","dddddddddd","rrrrrrrrrr","__________","_pd___d_de","____ddd___"]},{map:["__________","_p_rc_b___","__________","rrrrrrbrrr","rrrrrrbrrr","rrrrrrbrrr","__________","_______e__"],code:["="]},{map:["d___r____","d_p_r__p_","d___r____","d_rrrrrbr","d_r_____d","d___rdr_d","dr_rrerpd","dr_r__b__"],code:["="]},{map:["__________","_p_rc_b___","__________","rrrrrrbrrr","rrrrrr_rrr","rrrrrr_rrr","dddddd_ddd","_______e__"],code:["="]}];const D=e=>e.loadLevel(e.currentLevel),S=e=>e.stateHandlers.levelMap(),O={map:["___________","_cccc_cccc_","___c___c___","___e_p_e___","___________"],code:[..."gameover".split(""),"retry","menu"],handlers:[D,S]},M={map:["___________","___ccccc___","_ccccccccc_","___________","__c_c___c__","__e_e_p_e__","___________","___________"],code:[..."levelfinished!".split(""),"retry","menu","next"],handlers:[D,S,e=>{e.currentLevel++,e.loadLevel(e.currentLevel)}]};new y(w,{GAME_OVER:O,WON:M,LEVELS_MAP:w}).run();i(3)}]);</script></body></html>